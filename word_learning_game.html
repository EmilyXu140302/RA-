<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂçïËØçÈü≥Ê†áÂ≠¶‰π†Ê∏∏Êàè</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: #f7f8fa;
            margin: 0;
            padding: 0;
        }
        .top-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            background: #fff;
            border-bottom: 1px solid #eee;
            padding: 20px 0 10px 0;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .top-btn {
            padding: 10px 30px;
            margin: 0 10px;
            border: none;
            border-radius: 25px;
            background: #f0f0f0;
            color: #333;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .top-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: #fff;
        }
        .word-list-container {
            max-width: 700px;
            margin: 30px auto 0 auto;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 4px 24px rgba(102,126,234,0.07);
            padding: 30px 0 10px 0;
        }
        .list-title {
            font-size: 1.2em;
            color: #764ba2;
            margin: 20px 0 10px 30px;
            font-weight: bold;
        }
        .word-list {
            list-style: none;
            padding: 0 30px 0 30px;
            margin: 0;
        }
        .word-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background 0.2s;
        }
        .word-item:last-child {
            border-bottom: none;
        }
        .word-item:hover {
            background: #f8f9fa;
        }
        .word-text {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
        }
        .word-popup {
            display: none;
            position: absolute;
            left: 60%;
            min-width: 220px;
            background: #fff;
            border: 1px solid #eee;
            box-shadow: 0 2px 12px rgba(102,126,234,0.13);
            border-radius: 12px;
            padding: 12px 10px 12px 10px;
            z-index: 100;
            top: 0;
        }
        .word-popup.active {
            display: block;
        }
        .popup-phonetic {
            font-size: 1.2em;
            color: #667eea;
            margin-bottom: 6px;
        }
        .popup-phonetic.loading {
            color: #999;
            font-style: italic;
        }
        .popup-btns {
            display: flex;
            gap: 6px;
            margin-top: 4px;
            flex-direction: row;
            justify-content: flex-start;
        }
        .popup-btn {
            padding: 6px 14px;
            border: none;
            border-radius: 16px;
            font-size: 14px;
            cursor: pointer;
            background: #f0f0f0;
            color: #333;
            transition: all 0.2s;
        }
        .popup-btn.mastered {
            background: #28a745;
            color: #fff;
        }
        .popup-btn.unmastered {
            background: #ff7675;
            color: #fff;
        }
        .popup-btn.speak {
            background: #667eea;
            color: #fff;
        }
        .mastered-mark {
            color: #28a745;
            font-size: 1.1em;
            margin-left: 10px;
        }
        .unmastered-mark {
            color: #ff7675;
            font-size: 1.1em;
            margin-left: 10px;
        }
        @media (max-width: 800px) {
            .word-list-container { max-width: 98vw; }
            .word-popup { left: 10vw; min-width: 180px; }
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <button class="top-btn active" id="btnAll" onclick="switchTab('all')">ÂÖ®ÈÉ®</button>
        <button class="top-btn" id="btnUnmastered" onclick="switchTab('unmastered')">Êú™ÊéåÊè°</button>
        <button class="top-btn" id="btnMastered" onclick="switchTab('mastered')">Â∑≤ÊéåÊè°</button>
    </div>
    
    <div class="word-list-container" id="wordListContainer">
        <!-- Âä®ÊÄÅÊ∏≤ÊüìÂçïËØçÂàóË°® -->
    </div>
    
    <div id="popup" class="word-popup"></div>
    
    <script src="word_data.js"></script>
    <script>
        // ‰ΩøÁî®Êú¨Âú∞Êï∞ÊçÆ
        const WORDS = (typeof extendedWordData !== 'undefined') ? extendedWordData : [];
        const WORDS_PER_LIST = 100; // ÊØèÁªÑ100‰∏™ÂçïËØç

        // Áä∂ÊÄÅÂ≠òÂÇ®
        let masteredSet = new Set(JSON.parse(localStorage.getItem('masteredWords') || '[]'));
        let unmasteredSet = new Set(JSON.parse(localStorage.getItem('unmasteredWords') || '[]'));
        let currentTab = 'all'; // all, mastered, unmastered

        function renderWordLists() {
            const container = document.getElementById('wordListContainer');
            container.innerHTML = '';
            let filteredWords = WORDS;
            if (currentTab === 'mastered') {
                filteredWords = WORDS.filter(w => masteredSet.has(w.word));
            } else if (currentTab === 'unmastered') {
                filteredWords = WORDS.filter(w => unmasteredSet.has(w.word) || (!masteredSet.has(w.word)));
            }
            const total = filteredWords.length;
            let listCount = Math.ceil(total / WORDS_PER_LIST);
            for (let i = 0; i < listCount; i++) {
                const start = i * WORDS_PER_LIST;
                const end = Math.min((i + 1) * WORDS_PER_LIST, total);
                const listWords = filteredWords.slice(start, end);
                const listTitle = `ÂçïËØçÁªÑ ${i + 1}Ôºà${start + 1}-${end}Ôºâ`;
                const ul = document.createElement('ul');
                ul.className = 'word-list';
                listWords.forEach(wordObj => {
                    const li = document.createElement('li');
                    li.className = 'word-item';
                    li.innerHTML = `<span class="word-text">${wordObj.word}</span>` +
                        (masteredSet.has(wordObj.word) ? '<span class="mastered-mark">‚úî</span>' : (unmasteredSet.has(wordObj.word) ? '<span class="unmastered-mark">‚úò</span>' : ''));
                    li.onclick = (e) => showPopup(e, wordObj);
                    ul.appendChild(li);
                });
                const titleDiv = document.createElement('div');
                titleDiv.className = 'list-title';
                titleDiv.textContent = listTitle;
                container.appendChild(titleDiv);
                container.appendChild(ul);
            }
        }

        function showPopup(e, wordObj) {
            e.stopPropagation();
            const popup = document.getElementById('popup');
            
            // Áõ¥Êé•ÊòæÁ§∫Êú¨Âú∞Êï∞ÊçÆÔºàÊó†ÈúÄAPIË∞ÉÁî®Ôºâ
            const phonetic = wordObj.phonetic || 'ÊöÇÊó†Èü≥Ê†á';
            const meaning = wordObj.meaning || 'ÊöÇÊó†Èáä‰πâ';
            
            popup.innerHTML = `
                <div class="popup-phonetic" id="popupPhonetic">${phonetic}</div>
                <div style="margin-bottom:8px;">${meaning}</div>
                <div class="popup-btns">
                    <button class="popup-btn speak" onclick="speakWord('${wordObj.word}')">üîäÊúóËØª</button>
                    <button class="popup-btn mastered" onclick="setMastered('${wordObj.word}')">Â∑≤ÊéåÊè°</button>
                    <button class="popup-btn unmastered" onclick="setUnmastered('${wordObj.word}')">Êú™ÊéåÊè°</button>
                </div>
            `;
            popup.classList.add('active');
            
            // ÂÆö‰ΩçÂºπÁ™óÂà∞ÂçïËØçÂ∑¶‰æß
            const rect = e.currentTarget.getBoundingClientRect();
            popup.style.top = (window.scrollY + rect.top - 10) + 'px';
            popup.style.left = (rect.left - popup.offsetWidth - 20 > 0 ? rect.left - popup.offsetWidth - 20 : rect.right + 10) + 'px';
            
            // Ëá™Âä®Êí≠ÊîæÈü≥È¢ë
            speakWord(wordObj.word);
            
            // ÂÖ≥Èó≠ÂºπÁ™ó‰∫ã‰ª∂
            document.body.onclick = function(ev) {
                if (!popup.contains(ev.target)) popup.classList.remove('active');
            };
        }

        function speakWord(word) {
            if ('speechSynthesis' in window) {
                const utter = new window.SpeechSynthesisUtterance(word);
                utter.lang = 'en-US';
                utter.rate = 0.85;
                window.speechSynthesis.speak(utter);
            } else {
                alert('ÊµèËßàÂô®‰∏çÊîØÊåÅÊúóËØª');
            }
        }

        function setMastered(word) {
            masteredSet.add(word);
            unmasteredSet.delete(word);
            saveStatus();
            document.getElementById('popup').classList.remove('active');
            renderWordLists();
        }
        
        function setUnmastered(word) {
            unmasteredSet.add(word);
            masteredSet.delete(word);
            saveStatus();
            document.getElementById('popup').classList.remove('active');
            renderWordLists();
        }
        
        function saveStatus() {
            localStorage.setItem('masteredWords', JSON.stringify(Array.from(masteredSet)));
            localStorage.setItem('unmasteredWords', JSON.stringify(Array.from(unmasteredSet)));
        }
        
        function switchTab(tab) {
            currentTab = tab;
            document.getElementById('btnAll').classList.remove('active');
            document.getElementById('btnUnmastered').classList.remove('active');
            document.getElementById('btnMastered').classList.remove('active');
            if (tab === 'all') document.getElementById('btnAll').classList.add('active');
            if (tab === 'unmastered') document.getElementById('btnUnmastered').classList.add('active');
            if (tab === 'mastered') document.getElementById('btnMastered').classList.add('active');
            renderWordLists();
        }

        window.onload = function() {
            renderWordLists();
        };
    </script>
</body>
</html> 